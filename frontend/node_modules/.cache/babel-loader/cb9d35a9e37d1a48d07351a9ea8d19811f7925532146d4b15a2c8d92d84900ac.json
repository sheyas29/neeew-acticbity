{"ast":null,"code":"import React,{useState,useEffect}from'react';import ActivityTable from'./components/ActivityTable';import ProgressBar from'./components/ProgressBar';import LeftOutEventsModal from'./components/LeftOutEventsModal';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[activities,setActivities]=useState([]);const[progress,setProgress]=useState(0);const[showLeftOutModal,setShowLeftOutModal]=useState(false);const[currentPage,setCurrentPage]=useState(1);const itemsPerPage=2;// Number of topics per page\nconst[isDarkMode,setIsDarkMode]=useState(false);useEffect(()=>{fetch('http://192.168.0.106:5000/api/activities').then(response=>response.json()).then(data=>{console.log('Fetched activities:',data);if(Array.isArray(data)){setActivities(data);updateProgress(data);}else{console.error('Fetched data is not an array:',data);}}).catch(error=>console.error('Error fetching activities:',error));},[]);const updateProgress=data=>{const totalActivities=data.reduce((acc,topic)=>acc+topic.events.length,0);const completedActivities=data.reduce((acc,topic)=>acc+topic.events.filter(activity=>activity.status).length,0);const progress=totalActivities>0?Math.round(completedActivities/totalActivities*100):0;setProgress(progress);};const handleCheckboxChange=(topicIndex,index)=>{const newActivities=[...activities];const realTopicIndex=(currentPage-1)*itemsPerPage+topicIndex;if(newActivities[realTopicIndex]&&newActivities[realTopicIndex].events[index]){newActivities[realTopicIndex].events[index].status=!newActivities[realTopicIndex].events[index].status;setActivities(newActivities);updateProgress(newActivities);}};const handleReset=()=>{if(window.confirm('Are you sure you want to reset all statuses?')){const newActivities=activities.map(topic=>({...topic,events:topic.events.map(event=>({...event,status:false}))}));setActivities(newActivities);updateProgress(newActivities);fetch('http://192.168.0.106:5000/api/reset',{method:'POST'}).then(response=>response.json()).then(data=>console.log('Reset successful:',data)).catch(error=>console.error('Error resetting statuses:',error));}};const totalEvents=activities.reduce((acc,topic)=>acc+topic.events.length,0);const completedEvents=activities.reduce((acc,topic)=>acc+topic.events.filter(event=>event.status).length,0);const leftOutEvents=totalEvents-completedEvents;const paginatedActivities=activities.slice((currentPage-1)*itemsPerPage,currentPage*itemsPerPage);return/*#__PURE__*/_jsxs(\"div\",{className:\"App \".concat(isDarkMode?'dark-mode':'light-mode'),children:[/*#__PURE__*/_jsxs(\"header\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Activity Tracker\"}),/*#__PURE__*/_jsx(\"button\",{className:\"theme-toggle\",onClick:()=>setIsDarkMode(!isDarkMode),children:isDarkMode?'Switch to Light Mode':'Switch to Dark Mode'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-boxes\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-box\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Total Events\"}),/*#__PURE__*/_jsx(\"p\",{children:totalEvents})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-box\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Completed Events\"}),/*#__PURE__*/_jsx(\"p\",{children:completedEvents})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-box\",onClick:()=>setShowLeftOutModal(true),children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Left Out Events\"}),/*#__PURE__*/_jsx(\"p\",{children:leftOutEvents})]})]}),/*#__PURE__*/_jsx(ActivityTable,{activities:paginatedActivities,onCheckboxChange:handleCheckboxChange}),/*#__PURE__*/_jsx(ProgressBar,{progress:progress}),showLeftOutModal&&/*#__PURE__*/_jsx(LeftOutEventsModal,{activities:activities,onClose:()=>setShowLeftOutModal(false),onCheckboxChange:handleCheckboxChange}),/*#__PURE__*/_jsx(\"div\",{className:\"pagination\",children:Array.from({length:Math.ceil(activities.length/itemsPerPage)},(_,index)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage(index+1),className:index+1===currentPage?'active':'',children:index+1},index))}),/*#__PURE__*/_jsx(\"div\",{className:\"reset-button-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"reset-button\",onClick:handleReset,children:\"Reset All\"})})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","ActivityTable","ProgressBar","LeftOutEventsModal","jsx","_jsx","jsxs","_jsxs","App","activities","setActivities","progress","setProgress","showLeftOutModal","setShowLeftOutModal","currentPage","setCurrentPage","itemsPerPage","isDarkMode","setIsDarkMode","fetch","then","response","json","data","console","log","Array","isArray","updateProgress","error","catch","totalActivities","reduce","acc","topic","events","length","completedActivities","filter","activity","status","Math","round","handleCheckboxChange","topicIndex","index","newActivities","realTopicIndex","handleReset","window","confirm","map","event","method","totalEvents","completedEvents","leftOutEvents","paginatedActivities","slice","className","concat","children","onClick","onCheckboxChange","onClose","from","ceil","_"],"sources":["C:/Users/kshre/activity-tracker/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ActivityTable from './components/ActivityTable';\nimport ProgressBar from './components/ProgressBar';\nimport LeftOutEventsModal from './components/LeftOutEventsModal';\nimport './App.css';\n\nfunction App() {\n  const [activities, setActivities] = useState([]);\n  const [progress, setProgress] = useState(0);\n  const [showLeftOutModal, setShowLeftOutModal] = useState(false);\n  const [currentPage, setCurrentPage] = useState(1);\n  const itemsPerPage = 2; // Number of topics per page\n  const [isDarkMode, setIsDarkMode] = useState(false);\n\n  useEffect(() => {\n    fetch('http://192.168.0.106:5000/api/activities')\n      .then((response) => response.json())\n      .then((data) => {\n        console.log('Fetched activities:', data);\n        if (Array.isArray(data)) {\n          setActivities(data);\n          updateProgress(data);\n        } else {\n          console.error('Fetched data is not an array:', data);\n        }\n      })\n      .catch((error) => console.error('Error fetching activities:', error));\n  }, []);\n\n  const updateProgress = (data) => {\n    const totalActivities = data.reduce((acc, topic) => acc + topic.events.length, 0);\n    const completedActivities = data.reduce(\n      (acc, topic) => acc + topic.events.filter((activity) => activity.status).length,\n      0\n    );\n    const progress = totalActivities > 0 ? Math.round((completedActivities / totalActivities) * 100) : 0;\n    setProgress(progress);\n  };\n\n  const handleCheckboxChange = (topicIndex, index) => {\n    const newActivities = [...activities];\n    const realTopicIndex = (currentPage - 1) * itemsPerPage + topicIndex;\n    if (newActivities[realTopicIndex] && newActivities[realTopicIndex].events[index]) {\n      newActivities[realTopicIndex].events[index].status = !newActivities[realTopicIndex].events[index].status;\n      setActivities(newActivities);\n      updateProgress(newActivities);\n    }\n  };\n\n  const handleReset = () => {\n    if (window.confirm('Are you sure you want to reset all statuses?')) {\n      const newActivities = activities.map(topic => ({\n        ...topic,\n        events: topic.events.map(event => ({ ...event, status: false }))\n      }));\n      setActivities(newActivities);\n      updateProgress(newActivities);\n\n      fetch('http://192.168.0.106:5000/api/reset', { method: 'POST' })\n        .then(response => response.json())\n        .then(data => console.log('Reset successful:', data))\n        .catch(error => console.error('Error resetting statuses:', error));\n    }\n  };\n\n  const totalEvents = activities.reduce((acc, topic) => acc + topic.events.length, 0);\n  const completedEvents = activities.reduce((acc, topic) => acc + topic.events.filter(event => event.status).length, 0);\n  const leftOutEvents = totalEvents - completedEvents;\n\n  const paginatedActivities = activities.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage);\n\n  return (\n    <div className={`App ${isDarkMode ? 'dark-mode' : 'light-mode'}`}>\n      <header className=\"header\">\n        <h1>Activity Tracker</h1>\n        <button className=\"theme-toggle\" onClick={() => setIsDarkMode(!isDarkMode)}>\n          {isDarkMode ? 'Switch to Light Mode' : 'Switch to Dark Mode'}\n        </button>\n      </header>\n      <div className=\"info-boxes\">\n        <div className=\"info-box\">\n          <h3>Total Events</h3>\n          <p>{totalEvents}</p>\n        </div>\n        <div className=\"info-box\">\n          <h3>Completed Events</h3>\n          <p>{completedEvents}</p>\n        </div>\n        <div className=\"info-box\" onClick={() => setShowLeftOutModal(true)}>\n          <h3>Left Out Events</h3>\n          <p>{leftOutEvents}</p>\n        </div>\n      </div>\n      <ActivityTable activities={paginatedActivities} onCheckboxChange={handleCheckboxChange} />\n      <ProgressBar progress={progress} />\n      {showLeftOutModal && (\n        <LeftOutEventsModal \n          activities={activities} \n          onClose={() => setShowLeftOutModal(false)} \n          onCheckboxChange={handleCheckboxChange} \n        />\n      )}\n      <div className=\"pagination\">\n        {Array.from({ length: Math.ceil(activities.length / itemsPerPage) }, (_, index) => (\n          <button\n            key={index}\n            onClick={() => setCurrentPage(index + 1)}\n            className={index + 1 === currentPage ? 'active' : ''}\n          >\n            {index + 1}\n          </button>\n        ))}\n      </div>\n      <div className=\"reset-button-container\">\n        <button className=\"reset-button\" onClick={handleReset}>Reset All</button>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}